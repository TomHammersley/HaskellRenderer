#!/bin/sh

# Build main code
ghc -tmpdir tmp -hidir hi -odir obj -fext-core -fexcess-precision -funbox-strict-fields -threaded -rtsopts -fwarn-missing-signatures -Wall -O2 -fspec-constr -fliberate-case -fstatic-argument-transformation Main.hs -o ../crocodile $1 $2 $3 $4 $5 $6 $7 $8 $9

# Tidy up
mv *.hcr core/

# Unit test
scripts/unit_test

# Build test suite
ghc -tmpdir tmp -hidir hi -odir obj -fext-core -fexcess-precision -funbox-strict-fields -threaded -rtsopts -fwarn-missing-signatures -Wall -O2 -fspec-constr -fliberate-case -fstatic-argument-transformation Tests/HemisphereTest.hs -o Tests/HemisphereTest $1 $2 $3 $4 $5 $6 $7 $8 $9

